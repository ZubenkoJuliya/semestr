import requests  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤


class GoogleBooksAPI:
    def search_by_title(self, title_word: str):
        # –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ Google Books API —Å –ø–æ–∏—Å–∫–æ–º –ø–æ —Å–ª–æ–≤—É –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
        url = f"https://www.googleapis.com/books/v1/volumes?q=intitle:{title_word}&maxResults=5"

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –∫ API
        response = requests.get(url)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
        if response.status_code != 200:
            return "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API Google Books."

        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –∏–∑ JSON –≤ —Å–ª–æ–≤–∞—Ä—å Python
        data = response.json()

        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –∏–∑ –æ—Ç–≤–µ—Ç–∞
        items = data.get('items', [])

        # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø—É—Å—Ç–æ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        if not items:
            return "–ö–Ω–∏–≥–∏ —Å —Ç–∞–∫–∏–º —Å–ª–æ–≤–æ–º –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã."

        # –ë–µ—Ä—ë–º –ø–µ—Ä–≤—É—é –∫–Ω–∏–≥—É –∏–∑ —Å–ø–∏—Å–∫–∞
        book = items[0]

        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ
        info = book.get('volumeInfo', {})
        title = info.get('title', '–ù–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è')  # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
        authors = ', '.join(info.get('authors', ['–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä']))  # –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤
        link = info.get('infoLink', '–°—Å—ã–ª–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç')  # –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–Ω–∏–≥–∏

        # –§–æ—Ä–º–∏—Ä—É–µ–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–Ω–∏–≥–µ
        return f"üìñ <b>{title}</b>\nüë§ {authors}\nüîó {link}"


class OpenLibraryAPI:
    def search_by_author(self, author: str):
        # –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenLibrary API —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –∞–≤—Ç–æ—Ä—É
        search_url = f"https://openlibrary.org/search.json?q=author:{author}&limit=1"

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –∫ API
        search_response = requests.get(search_url)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
        if search_response.status_code != 200:
            return "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ OpenLibrary."

        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –∏–∑ JSON –≤ —Å–ª–æ–≤–∞—Ä—å Python
        search_data = search_response.json()

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥ –≤ –æ—Ç–≤–µ—Ç–µ
        if not search_data.get("docs"):
            return "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –∫–Ω–∏–≥—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑."

        # –ë–µ—Ä—ë–º –ø–µ—Ä–≤—É—é –∫–Ω–∏–≥—É –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        book_data = search_data["docs"][0]

        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ
        title = book_data.get("title", "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è")  # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
        authors = ", ".join(book_data.get("author_name", ["–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω"]))  # –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤
        year = book_data.get("first_publish_year", "–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω")  # –ì–æ–¥ –ø–µ—Ä–≤–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è

        # –§–æ—Ä–º–∏—Ä—É–µ–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–Ω–∏–≥–µ
        return f"üìö –ö–Ω–∏–≥–∞ –∞–≤—Ç–æ—Ä–∞ '{author}':\n–ù–∞–∑–≤–∞–Ω–∏–µ: {title}\n–ê–≤—Ç–æ—Ä: {authors}\n–ì–æ–¥: {year}"
